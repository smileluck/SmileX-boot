[toc]



# vue-router

## Catch all routes ("*") must now be defined using a param with a custom regexp.

在vue2时，需要在没有匹配到路由时跳转404，只需要在路由数组最后面加上下面对象即可。

```json
{
  path: '*', redirect: '/404', hidden: true
}
```

但是在vue3时会报出标题错误。正确的写法应该是以下这样。

```json
{
  path: '/:pathMatch(.*)', redirect: '/404', hidden: true
}
```



## 用户登陆后，在访问动态路由时刷新，会跳转404问题

```javascript

// 全局路由
const globalRoutes = [{
  path: "/login",
  name: "login",
  component: () => import("@/views/Login.vue"), hidden: true
}, {
  path: "/404",
  name: "404",
  component: () => import("@/views/common/404.vue"), hidden: true
}, {
  path: "/:pathMatch(.*)*", redirect: '/404', hidden: true
}]
```

调整为后正常访问

```javascript
// 全局路由
const globalRoutes = [{
  path: "/login",
  name: "login",
  component: () => import("@/views/Login.vue"), hidden: true
}, {
  path: "/:pathMatch(.*)*", component: () => import("@/views/common/404.vue"), hidden: true
}]
```

怀疑是当刷新后，默认执行了一次重定向操作，导致跳转到404。此时前置守卫的next没有生效。